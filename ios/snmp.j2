!
snmp-server location {{ site["name"] }} / {{ site["physical_address"] | replace("\n", " ") | replace("\r", "") }} / {{ site["region"]["name"] }} / {{ site["region"]["parent"]["name"] }} /US-NA-Utility-WAN-Remotes/Criticality-Low
!
snmp-server source-interface {{ primary_ip4["interface"]["name"] }}
!
{% for group in config_context["snmp"]["group"] %}
snmp-server group {{ group.id }} v3 {{ group.v3.securitylevel }} read V3Read write V3Write access {{ group.v3.access }}
{% endfor %}
!
{% for server in config_context["snmp"]["server"] %}
snmp-server host {{ server.ip }} version {{ server.version}} {{ server.securitylevel}} {{ server.user }}
{% endfor %}
!
snmp-server view V3Read iso included
snmp-server view V3Write iso included
snmp-server view V3Notify iso included
snmp-server trap link ietf
snmp-server trap-source  {{ primary_ip4["interface"]["name"] }}
snmp-server enable traps snmp linkdown linkup coldstart warmstart
snmp-server enable traps license
snmp-server enable traps entity
snmp-server enable traps envmon fan shutdown supply temperature status
snmp-server enable traps config
no snmp trap link-status 
snmp-server enable traps memory
snmp ifmib ifindex persist
